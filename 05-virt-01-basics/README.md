
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

- При аппаратной виртуализации гипервизор устанавливается на голое железо, виртуальные машины разворачиваются непосредственно на гипервизоре, и уже 
гипервизор распределяет между ними реальные физические ресурсы железного сервера. На один гипервизор можно устанавливать различные виды ОС 
с разными ядрами. Обеспечивает наилучшую утилизацию имеющихся аппаратных ресурсов.
- При паравиртуализации гипервизор устанавливается на хостовую ОС, ВМ разворачиваются внутри гипервизора, соответственно появляется ещё один 
слой ПО между виртуальными машинами и ресурсами железа. Передача инструкций между ВМ и аппаратной частью замедлится, по сравнению с полной 
виртуализацией. Развертывание ВМ с разными ОС в рамках одного гипервизора также поддерживается. Ядра ОС разворачиваемых ВМ будут модифицированы.
- В случае виртуализации средствами ОС, функцию гипервизора выполняет хостовая ОС. Распределение ресурсов происходит за счет выделения отдельных 
неймспейсов запущенным виртуальным машинам. Можно регулировать количество выделяемых ресурсов ВМ. Главным отличием от двух вышеописанным 
вариантов виртуализации является тот факт, что при таком способе виртуализации, все запущенные ВМ будут иметь такое же ядро, что и хостовая 
система, потому что виртуализируется не ОС целиком, а лишь пользовательское окружение ОС.

---

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- *Высоконагруженная база данных, чувствительная к отказу.* На мой взгляд, надежнее всего использовать Физические сервера, что позволит 
оптимизировать работу ПО базы данных и дисковой подсистемы, также сокращается число точек отказа: гипервизор (при паравиртуализации), 
другие процессы хостовой системы или "шумные" соседние контейнеры (при виртуализации уровня ОС). Правда появляется риск выхода из строя 
аппаратной части, что приведет к недоступности сервиса на долгое время.
- *Различные web-приложения.* Виртуализация уровня ОС. Простой и надежный способ для развертывания однотипных приложений. Позволяет легко 
администрировать и масштабировать контейнеры с работающими в них приложениями.
- *Windows системы для использования бухгалтерским отделом.* Паравиртуализация, желательно средствами Microsoft Hyper-V с использованием
 инфраструктуры виртуальных рабочих столов (VDI). Позволит эффективно администрировать рабочие места пользователей и серверную часть 
 бухгалтерского ПО.
- *Системы, выполняющие высокопроизводительные расчеты на GPU.* Физические сервера, потому что важна скорость обмена инструкциями между ПО 
выполняющим расчеты и драйвером GPU.

---

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, 
требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
- В данном случае систему управления виртуализацией можно выстраивать средствами Microsoft Hyper-V, потому что Windows-based 
инфраструктура удобно разворачивается, администрируется, бэкапируется, реплицируется, именно средствами Hyper-V. Так же Hyper-V, без 
проблем позволяет разворачивать Linux сервера.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе 
Linux и Windows виртуальных машин.
- KVM - активно развивающийся гипервизор, входит в состав ядра Linux. Обеспечивает высокую производительность установленных на него ВМ. Отлично
виртуализирует как Windows так Linux машины. 
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
- Microsoft Hyper-V Server - бесплатная серверная версия гибридного гипервизора от Microsoft. Прост в использовании, полностью совместим с ОС 
семейства Windows, легко разворачивать и администрировать виртуальную инфраструктуру.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
- OpenVZ - обеспечивает высокую плотность виртуализации и хорошую производительность за счет виртуализации на уровне ОС Linux. Позволяет быстро 
разворачивать разные дистрибутивы Linux с общим ядром, быстрая миграция виртуальных машин между физическими серверами.
- Так же можно применять другие способы контейниризации, например популярный Docker.

---

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) 
и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? 
Мотивируйте ваш ответ примерами.

Проблемы и недостатки:
- Возможно: сложная, объемная, негибкая, требующая больших затрат на управление виртуальная инфраструктура.
- Отсутствие единой системы мониторинга и администрирования, что снижает оперативность оценки состояния вычислительных ресурсов.
- Сокращаются возможности автоматического распределения вычислительных ресурсов, что может приводить к дефициту вычислительных ресурсов 
на одном из участков вычислителной среды.

Варианты решения вышеописанных проблем:
- Качественная автоматизация сбора и анализа информационных процессов мониторинга вычислительных ресурсов в гетерогенной виртуальной среде 
специализированными программными средствами.
- Обеспечение достаточного количества вычислительных ресурсов на всех узлах виртуальной среды.
- Решение проблемы централизованного администрирования с помощью механизма скриптов.

При проектировании новой виртуальной среды следует исходить из реального технического задания: какие именно требования предъявляются к создаваемой среде.
- Бывают ситуации когда создание гетерогенной среды логически обосновано, напрмер: необходимо содержать парк Windows-серверов, который удобно 
разворачивать и администрировать средствами Hyper-V; параллельно с ним содержать парк Linux-серверов на KVM или Xen, на котором будет крутиться 
высоконагруженная микросервисная архитектура, реализованная средствами контейниризации.
- Если же технические требования к создаваемой виртуальной среде и выделяемые финансовые ресурсы позволяют реализовать ее средствами одного вендора, 
тогда лучше отказаться от принципа гетерогенности. Например, с помощью VMware можно виртуализировать среду любой сложности, но это дорого. 
- Другой пример: нам нужно виртуализировать сервис который крутится на web-приложениях на однотипных Linux-серверах, тут отлично подойдет 
контейнерная виртуализация средствами Docker.

---
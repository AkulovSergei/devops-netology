## Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"
##
## Вопрос 1.

Есть скрипт:

a=1

b=2

c=a+b

d=$a+$b

e=$(($a+$b))

Переменной **c** будет присвоено строковое значение "**a+b**", потому что **bash воспримет выражение a+b как простую строку**.

Переменной **d** будет присвоено строковое значение "**1+2**", потому что **bash запишет в переменную d строку**, которая будет состоять из следующих символов: содержание переменной а + содержание переменной b.

Переменной **e** будет присвоено значение "**3**", потому что **bash произведет арифметическую операцию сложения значений переменных a и b** (выражения заключенного в двойные круглые скобки)
##
## Вопрос 2. На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:

while ((1==1) #В первой строке в конце не хватает ")", что бы цикл был правильно запущен

 do #Отрываем цикл while

    curl https://localhost:4757 #Проверяем доступность ресурса

        if (($? != 0)) #Открываем конструкцию if. Если ресурс недоступен (код завершения предыдущей команды не равен 0)

         then #тогда 

            date >> curl.log #Записываем в лог текущее время

        else break #Добавляем данную строку в наш скрипт. Выходим из if, если работа сервера восстановлена

          fi #Закрываем конструкцию if

  done #Закрываем цикл while
##
## Вопрос 3. Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.

#!/usr/bin/env bash

_>script3.log_

hosts=(192.168.0.1 173.194.222.113 87.250.250.242)

    for i in {1..5}

    do

        date>>script3.log

        for h in ${hosts[@]}

        do

            curl -s --connect-timeout 3 $h:80 >>/dev/null

            echo "   HOST " $h "checked with status" $? >>script3.log

        done

    done
##
## Вопрос 4. Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается

#!/usr/bin/env bash

_>script4.log_

_>script4.error_

excode=0

hosts=(192.168.0.1 173.194.222.113 87.250.250.242)

    while ((1==1))

    do

        date>>script4.log

        for h in ${hosts[@]}
        
        do

            curl -s --connect-timeout 3 $h:80 >>/dev/null

            excode=$?

                if (($excode == 0))
                
                then

                    echo "   HOST " $h "checked with status" $excode >>script4.log
            
                else

                    date>script4.error
    
                    echo "   HOST " $h "unreachable with status" $excode >>script4.error
                    exit
    
                fi
    
        done

    done